# THETA 前端项目未实现功能清单

## 📋 概述

本文档列出了当前前端项目中尚未实现的功能和逻辑。当前项目主要完成了 UI 界面和交互原型，但大部分后端集成和实际业务逻辑还未实现。

---

## 🔴 数据治理页面 (`/setup`)

### 1. 文件上传功能
**位置**: `app/setup/page.tsx:82-95`

**当前状态**: 
- ✅ UI 已完成（拖拽上传区域）
- ❌ 文件上传逻辑未实现
- ❌ 没有后端 API 集成
- ❌ 文件只保存在前端状态，未上传到服务器

**需要实现**:
- 实现文件选择按钮的点击事件 (`<Button>选择文件</Button>`)
- 集成文件上传 API（POST `/api/upload`）
- 处理文件上传进度
- 文件验证（格式、大小检查）
- 错误处理

### 2. 字段映射功能
**位置**: `app/setup/page.tsx:113-171`

**当前状态**:
- ✅ UI 已完成（下拉选择框）
- ❌ 字段选项是硬编码的
- ❌ 没有从实际上传的文件中读取表头
- ❌ 没有文件解析逻辑

**需要实现**:
- 解析 CSV/Excel 文件获取表头
- 动态生成字段选择选项
- 字段类型自动识别
- 字段映射验证

### 3. 开始分析按钮
**位置**: `app/setup/page.tsx:197-199`

**当前状态**:
- ✅ UI 已完成
- ❌ 点击后没有实际功能
- ❌ 没有调用后端分析 API

**需要实现**:
- 调用后端 API 启动分析任务 (`POST /api/analyze`)
- 传递配置参数（文件、字段映射、模型选择）
- 任务状态跟踪
- 跳转到分析结果页面

### 4. 保存配置功能
**位置**: `app/setup/page.tsx:200-202`

**当前状态**:
- ✅ UI 已完成
- ❌ 点击后没有实际功能
- ❌ 没有保存逻辑

**需要实现**:
- 保存配置到后端 (`POST /api/config`)
- 或保存到本地存储 (localStorage)
- 配置加载功能
- 配置管理界面

### 5. AI Sidebar 消息
**位置**: `app/setup/page.tsx:44-48`

**当前状态**:
- ✅ UI 已完成
- ❌ 消息是硬编码的静态数据
- ❌ 没有实际的 AI Agent 交互

**需要实现**:
- 连接后端 AI Agent API
- 实时消息更新
- 根据用户操作动态生成消息
- WebSocket 或轮询机制

---

## 🔴 RAG 工作台页面 (`/rag`)

### 6. 搜索功能
**位置**: `app/rag/page.tsx:67-76`

**当前状态**:
- ✅ UI 已完成（搜索框和按钮）
- ❌ 搜索按钮没有实际功能
- ❌ 没有调用后端 RAG API

**需要实现**:
- 调用后端 RAG 搜索 API (`POST /api/rag/search`)
- 传递搜索关键词
- 显示搜索结果
- 加载状态和错误处理

### 7. 引用来源链接
**位置**: `app/rag/page.tsx:118-120`

**当前状态**:
- ✅ UI 已完成（ExternalLink 按钮）
- ❌ 点击后没有跳转功能
- ❌ 没有实际的文档链接

**需要实现**:
- 实现文档链接跳转
- 或打开文档预览模态框
- 文档访问权限控制
- PDF/文档查看器集成

### 8. 知识库数据
**位置**: `app/rag/page.tsx:40-44`

**当前状态**:
- ✅ UI 已完成
- ❌ 数据是硬编码的示例数据
- ❌ 没有从后端获取真实知识库列表

**需要实现**:
- 调用后端 API 获取知识库列表 (`GET /api/knowledge-bases`)
- 动态显示知识库信息
- 知识库管理功能

### 9. 示例内容替换
**位置**: `app/rag/page.tsx:15-24`

**当前状态**:
- ✅ UI 已完成
- ❌ 显示的是硬编码的示例内容
- ❌ 没有从搜索结果中获取真实内容

**需要实现**:
- 根据搜索结果动态显示内容
- 内容格式化
- 引用标注自动生成

---

## 🔴 分析仪表盘页面 (`/analytics`)

### 10. 时序数据 API
**位置**: `app/analytics/page.tsx:23-30`

**当前状态**:
- ✅ UI 已完成（图表组件）
- ❌ 数据是硬编码的示例数据
- ❌ 没有从后端获取真实分析结果

**需要实现**:
- 调用后端 API 获取时序数据 (`GET /api/analytics/timeline`)
- 数据格式转换
- 图表数据更新

### 11. UMAP 数据 API
**位置**: `app/analytics/page.tsx:32-36`

**当前状态**:
- ✅ UI 已完成（散点图）
- ❌ 数据是随机生成的示例数据
- ❌ 没有从后端获取真实的 UMAP 降维结果

**需要实现**:
- 调用后端 API 获取 UMAP 数据 (`GET /api/analytics/umap`)
- 聚类信息获取
- 数据点交互功能

### 12. 层次聚类树可视化
**位置**: `app/analytics/page.tsx:159-172`

**当前状态**:
- ❌ 完全未实现
- ❌ 只有占位符文本
- ❌ 注释说明需要使用 D3.js

**需要实现**:
- 集成 D3.js 或类似可视化库
- 实现树状图组件
- 调用后端 API 获取层次聚类数据 (`GET /api/analytics/hierarchy`)
- 节点交互功能（展开/折叠、点击查看详情）

### 13. 关键词数据 API
**位置**: `app/analytics/page.tsx:38-49`

**当前状态**:
- ✅ UI 已完成（关键词标签）
- ❌ 数据是硬编码的示例数据
- ❌ 没有从后端获取真实的 c-TF-IDF 结果

**需要实现**:
- 调用后端 API 获取关键词数据 (`GET /api/analytics/keywords`)
- 关键词权重计算
- 动态样式调整

### 14. AI Sidebar 动态消息
**位置**: `app/analytics/page.tsx:56-66`

**当前状态**:
- ✅ UI 已完成
- ❌ 消息是硬编码的
- ❌ 没有根据实际分析结果生成消息

**需要实现**:
- 根据分析结果动态生成消息
- 指标计算和展示
- 智能洞察生成

---

## 🔴 通用功能

### 15. 后端 API 集成
**当前状态**:
- ❌ 没有 API 客户端配置
- ❌ 没有 API 路由定义
- ❌ 没有错误处理机制
- ❌ 没有请求拦截器

**需要实现**:
- 创建 API 客户端（使用 fetch 或 axios）
- 配置 API 基础 URL
- 实现请求/响应拦截器
- 统一错误处理
- 加载状态管理

### 16. 状态管理
**当前状态**:
- ✅ 使用 React useState 进行本地状态管理
- ❌ 没有全局状态管理
- ❌ 没有数据持久化

**需要实现**:
- 考虑使用 Zustand 或 Redux 进行全局状态管理
- 实现数据缓存
- 实现配置持久化

### 17. 路由保护
**当前状态**:
- ❌ 没有路由保护
- ❌ 没有身份验证
- ❌ 没有权限控制

**需要实现**:
- 实现身份验证
- 路由守卫
- 权限检查

### 18. 错误处理
**当前状态**:
- ❌ 没有全局错误处理
- ❌ 没有错误边界
- ❌ 没有用户友好的错误提示

**需要实现**:
- React Error Boundary
- 全局错误处理
- 错误提示组件
- 错误日志记录

---

## 📊 实现优先级建议

### 🔥 高优先级（核心功能）
1. 文件上传功能
2. 开始分析按钮 - API 集成
3. RAG 搜索功能
4. 数据分析 API 集成

### ⚡ 中优先级（重要功能）
5. 字段映射 - 文件解析
6. 层次聚类树可视化
7. AI Sidebar 实时交互
8. 保存配置功能

### 📝 低优先级（增强功能）
9. 引用来源链接跳转
10. 全局状态管理
11. 路由保护
12. 错误处理完善

---

## 🔗 后端 API 需求

根据前端功能需求，后端需要提供以下 API：

### 数据治理相关
- `POST /api/upload` - 文件上传
- `POST /api/analyze` - 启动分析任务
- `GET /api/task/:id/status` - 查询任务状态
- `POST /api/config` - 保存配置
- `GET /api/config` - 获取配置

### RAG 相关
- `POST /api/rag/search` - RAG 搜索
- `GET /api/knowledge-bases` - 获取知识库列表
- `GET /api/documents/:id` - 获取文档内容

### 分析相关
- `GET /api/analytics/timeline` - 获取时序数据
- `GET /api/analytics/umap` - 获取 UMAP 数据
- `GET /api/analytics/hierarchy` - 获取层次聚类数据
- `GET /api/analytics/keywords` - 获取关键词数据

### AI Agent 相关
- `WebSocket /api/agent/stream` - AI Agent 消息流
- `POST /api/agent/query` - AI Agent 查询

---

## 📝 注意事项

1. **当前项目状态**: 这是一个 UI 原型阶段的项目，主要完成了界面设计和基础交互
2. **数据流**: 所有数据都是前端模拟的，需要与后端 API 集成
3. **测试**: 建议在实现每个功能后添加单元测试和集成测试
4. **文档**: 建议为每个 API 接口编写 API 文档

---

**最后更新**: 2025-01-11
**项目状态**: 前端 UI 完成，后端集成待实现
